# æ—¥å¿—æŒä¹…åŒ–ä½¿ç”¨ç¤ºä¾‹

## ç¤ºä¾‹ 1: æŸ¥çœ‹æœºå™¨äººçš„å†å²è¿è¡Œè®°å½•

### åœºæ™¯
ä½ æƒ³æŸ¥çœ‹æœºå™¨äººæ˜¨å¤©çš„è¿è¡Œæƒ…å†µï¼Œçœ‹çœ‹å®ƒåšäº†ä»€ä¹ˆã€‚

### æ­¥éª¤
1. è¿›å…¥æœºå™¨äººè¯¦æƒ…é¡µ
2. ç‚¹å‡»"å†å²æ—¥å¿—"æŒ‰é’®
3. æ‰¾åˆ°æ˜¨å¤©çš„æ—¥å¿—ä¼šè¯ï¼ˆæŒ‰æ—¶é—´æ’åºï¼‰
4. ç‚¹å‡»"æŸ¥çœ‹æ—¥å¿—"
5. æµè§ˆå®Œæ•´çš„è¿è¡Œæ—¥å¿—

### æˆªå›¾è¯´æ˜
```
å†å²æ—¥å¿—åˆ—è¡¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æˆ‘çš„æœºå™¨äºº                          [è¿è¡Œä¸­]    â”‚
â”‚ ğŸ“… 2026-01-16 10:30:00  â± 2å°æ—¶30åˆ†é’Ÿ          â”‚
â”‚ 2å°æ—¶å‰                          [æŸ¥çœ‹æ—¥å¿—] [ğŸ—‘] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æˆ‘çš„æœºå™¨äºº                                      â”‚
â”‚ ğŸ“… 2026-01-15 14:20:00  â± 1å°æ—¶15åˆ†é’Ÿ          â”‚
â”‚ 1å¤©å‰                            [æŸ¥çœ‹æ—¥å¿—] [ğŸ—‘] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç¤ºä¾‹ 2: è°ƒè¯•é”™è¯¯

### åœºæ™¯
æœºå™¨äººè¿è¡Œæ—¶å‡ºç°é”™è¯¯å¹¶åœæ­¢ï¼Œä½ éœ€è¦æŸ¥çœ‹é”™è¯¯æ—¥å¿—ã€‚

### æ­¥éª¤
1. æœºå™¨äººåœæ­¢åï¼Œç‚¹å‡»"å†å²æ—¥å¿—"
2. æ‰¾åˆ°æœ€è¿‘çš„ä¼šè¯ï¼ˆç¬¬ä¸€ä¸ªï¼‰
3. ç‚¹å‡»"æŸ¥çœ‹æ—¥å¿—"
4. åœ¨è¿‡æ»¤å™¨ä¸­é€‰æ‹©"é”™è¯¯"çº§åˆ«
5. æŸ¥çœ‹æ‰€æœ‰é”™è¯¯ä¿¡æ¯
6. ç‚¹å‡»"ä¸‹è½½æ—¥å¿—"ä¿å­˜å®Œæ•´æ—¥å¿—

### æ—¥å¿—ç¤ºä¾‹
```
[2026-01-16T10:30:01.000Z] [INFO] [system] Bot started
[2026-01-16T10:30:05.000Z] [INFO] [bot] Connected to server
[2026-01-16T10:35:20.000Z] [ERROR] [bot] Failed to execute command: timeout
[2026-01-16T10:35:21.000Z] [ERROR] [system] Process error: Connection lost
```

## ç¤ºä¾‹ 3: åˆ†ææœºå™¨äººè¡Œä¸º

### åœºæ™¯
ä½ æƒ³åˆ†ææœºå™¨äººåœ¨è¿‡å»ä¸€å‘¨çš„è¿è¡Œæ¨¡å¼ã€‚

### æ­¥éª¤
1. è¿›å…¥å†å²æ—¥å¿—é¡µé¢
2. æŸ¥çœ‹è¯¥æœºå™¨äººçš„æ‰€æœ‰ä¼šè¯
3. æ³¨æ„æ¯ä¸ªä¼šè¯çš„æŒç»­æ—¶é—´
4. ä¸‹è½½å¤šä¸ªä¼šè¯çš„æ—¥å¿—
5. ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æˆ–è„šæœ¬åˆ†ææ—¥å¿—å†…å®¹

### åˆ†æè„šæœ¬ç¤ºä¾‹ (Python)
```python
import json
from collections import Counter

def analyze_logs(log_file):
    """åˆ†ææ—¥å¿—æ–‡ä»¶"""
    levels = Counter()
    sources = Counter()
    
    with open(log_file, 'r', encoding='utf-8') as f:
        for line in f:
            try:
                entry = json.loads(line)
                if entry.get('type') == 'log':
                    levels[entry['level']] += 1
                    sources[entry['source']] += 1
            except:
                pass
    
    print(f"æ—¥å¿—çº§åˆ«ç»Ÿè®¡: {dict(levels)}")
    print(f"æ—¥å¿—æ¥æºç»Ÿè®¡: {dict(sources)}")

# ä½¿ç”¨
analyze_logs('logs/bot_123_2026-01-16T10-30-00-000Z.jsonl')
```

è¾“å‡ºç¤ºä¾‹:
```
æ—¥å¿—çº§åˆ«ç»Ÿè®¡: {'info': 1250, 'warn': 45, 'error': 3}
æ—¥å¿—æ¥æºç»Ÿè®¡: {'bot': 1100, 'system': 150, 'stdout': 48}
```

## ç¤ºä¾‹ 4: æ¯”è¾ƒä¸åŒé…ç½®çš„æ•ˆæœ

### åœºæ™¯
ä½ ä¿®æ”¹äº†æœºå™¨äººçš„æ¨¡å‹é…ç½®ï¼Œæƒ³æ¯”è¾ƒæ–°æ—§é…ç½®çš„æ•ˆæœã€‚

### æ­¥éª¤
1. ä½¿ç”¨æ—§é…ç½®è¿è¡Œæœºå™¨äºº 30 åˆ†é’Ÿ
2. åœæ­¢æœºå™¨äººï¼Œè®°å½•ä¼šè¯ ID
3. ä¿®æ”¹é…ç½®ï¼ˆå¦‚æ›´æ¢æ¨¡å‹ï¼‰
4. ä½¿ç”¨æ–°é…ç½®è¿è¡Œæœºå™¨äºº 30 åˆ†é’Ÿ
5. åœæ­¢æœºå™¨äºº
6. åˆ†åˆ«æŸ¥çœ‹ä¸¤ä¸ªä¼šè¯çš„æ—¥å¿—
7. æ¯”è¾ƒé”™è¯¯ç‡ã€è­¦å‘Šæ•°é‡ç­‰æŒ‡æ ‡

### å¯¹æ¯”è¡¨æ ¼
```
é…ç½®      | è¿è¡Œæ—¶é—´ | ä¿¡æ¯ | è­¦å‘Š | é”™è¯¯ | å¤‡æ³¨
---------|---------|------|------|------|------
GPT-4    | 30åˆ†é’Ÿ  | 850  | 12   | 1    | ç¨³å®š
Claude   | 30åˆ†é’Ÿ  | 920  | 8    | 0    | æ›´å¿«
```

## ç¤ºä¾‹ 5: å¯¼å‡ºæ—¥å¿—ç”¨äºæŠ¥å‘Š

### åœºæ™¯
ä½ éœ€è¦å‘å›¢é˜Ÿå±•ç¤ºæœºå™¨äººçš„è¿è¡Œæƒ…å†µã€‚

### æ­¥éª¤
1. é€‰æ‹©è¦å±•ç¤ºçš„ä¼šè¯
2. ç‚¹å‡»"ä¸‹è½½æ—¥å¿—"
3. ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€
4. æå–å…³é”®ä¿¡æ¯
5. æ•´ç†æˆæŠ¥å‘Š

### æŠ¥å‘Šæ¨¡æ¿
```markdown
# æœºå™¨äººè¿è¡ŒæŠ¥å‘Š

## åŸºæœ¬ä¿¡æ¯
- æœºå™¨äººåç§°: æˆ‘çš„æœºå™¨äºº
- è¿è¡Œæ—¶é—´: 2026-01-16 10:30 - 13:00
- æŒç»­æ—¶é—´: 2å°æ—¶30åˆ†é’Ÿ

## è¿è¡Œç»Ÿè®¡
- æ€»æ—¥å¿—æ¡æ•°: 1,298
- ä¿¡æ¯: 1,250 (96.3%)
- è­¦å‘Š: 45 (3.5%)
- é”™è¯¯: 3 (0.2%)

## å…³é”®äº‹ä»¶
1. 10:30:00 - æœºå™¨äººå¯åŠ¨
2. 10:30:05 - è¿æ¥åˆ°æœåŠ¡å™¨
3. 11:45:20 - å®Œæˆä»»åŠ¡ï¼šæ”¶é›†æœ¨æ
4. 12:30:15 - è­¦å‘Šï¼šç‰©å“æ å·²æ»¡
5. 13:00:00 - æœºå™¨äººåœæ­¢

## é—®é¢˜å’Œå»ºè®®
- ç‰©å“æ ç®¡ç†éœ€è¦ä¼˜åŒ–
- æ•´ä½“è¿è¡Œç¨³å®š
```

## ç¤ºä¾‹ 6: è‡ªåŠ¨åŒ–æ—¥å¿—å¤„ç†

### åœºæ™¯
ä½ æƒ³è‡ªåŠ¨å¤„ç†æ—¥å¿—ï¼Œæå–æœ‰ç”¨ä¿¡æ¯ã€‚

### Bash è„šæœ¬ç¤ºä¾‹
```bash
#!/bin/bash
# æå–æ‰€æœ‰é”™è¯¯æ—¥å¿—

LOG_DIR="logs"
OUTPUT_FILE="errors_$(date +%Y%m%d).txt"

echo "æå–é”™è¯¯æ—¥å¿—..." > "$OUTPUT_FILE"
echo "==================" >> "$OUTPUT_FILE"

for file in "$LOG_DIR"/*.jsonl; do
    echo "" >> "$OUTPUT_FILE"
    echo "æ–‡ä»¶: $(basename $file)" >> "$OUTPUT_FILE"
    echo "---" >> "$OUTPUT_FILE"
    
    grep '"level":"error"' "$file" | \
    jq -r '"\(.timestamp) - \(.message)"' >> "$OUTPUT_FILE"
done

echo "å®Œæˆï¼é”™è¯¯æ—¥å¿—å·²ä¿å­˜åˆ° $OUTPUT_FILE"
```

### Node.js è„šæœ¬ç¤ºä¾‹
```javascript
const fs = require('fs');
const path = require('path');

async function extractErrors() {
    const logsDir = 'logs';
    const files = fs.readdirSync(logsDir)
        .filter(f => f.endsWith('.jsonl'));
    
    const errors = [];
    
    for (const file of files) {
        const content = fs.readFileSync(
            path.join(logsDir, file), 
            'utf-8'
        );
        
        for (const line of content.split('\n')) {
            try {
                const entry = JSON.parse(line);
                if (entry.type === 'log' && entry.level === 'error') {
                    errors.push({
                        file,
                        timestamp: entry.timestamp,
                        message: entry.message
                    });
                }
            } catch {}
        }
    }
    
    console.log(`æ‰¾åˆ° ${errors.length} ä¸ªé”™è¯¯`);
    console.log(JSON.stringify(errors, null, 2));
}

extractErrors();
```

## ç¤ºä¾‹ 7: æ¸…ç†æ—§æ—¥å¿—

### åœºæ™¯
æ—¥å¿—æ–‡ä»¶å ç”¨å¤ªå¤šç©ºé—´ï¼Œéœ€è¦æ¸…ç†æ—§æ—¥å¿—ã€‚

### æ‰‹åŠ¨æ¸…ç†
1. è¿›å…¥å†å²æ—¥å¿—é¡µé¢
2. æ‰¾åˆ°ä¸éœ€è¦çš„æ—§ä¼šè¯
3. ç‚¹å‡»åˆ é™¤æŒ‰é’®
4. ç¡®è®¤åˆ é™¤

### æ‰¹é‡æ¸…ç†è„šæœ¬
```bash
#!/bin/bash
# åˆ é™¤ 30 å¤©å‰çš„æ—¥å¿—

LOGS_DIR="logs"
DAYS=30

echo "åˆ é™¤ $DAYS å¤©å‰çš„æ—¥å¿—..."

find "$LOGS_DIR" -name "*.jsonl" -type f -mtime +$DAYS -delete

echo "å®Œæˆï¼"
```

## ç¤ºä¾‹ 8: ç›‘æ§æ—¥å¿—å¤§å°

### åœºæ™¯
ä½ æƒ³ç›‘æ§æ—¥å¿—æ–‡ä»¶çš„å¤§å°ï¼Œé¿å…å ç”¨å¤ªå¤šç©ºé—´ã€‚

### ç›‘æ§è„šæœ¬
```bash
#!/bin/bash
# æ£€æŸ¥æ—¥å¿—ç›®å½•å¤§å°

LOGS_DIR="logs"
MAX_SIZE_MB=1000

current_size=$(du -sm "$LOGS_DIR" | cut -f1)

echo "å½“å‰æ—¥å¿—å¤§å°: ${current_size}MB"

if [ $current_size -gt $MAX_SIZE_MB ]; then
    echo "è­¦å‘Šï¼šæ—¥å¿—å¤§å°è¶…è¿‡ ${MAX_SIZE_MB}MBï¼"
    echo "å»ºè®®æ¸…ç†æ—§æ—¥å¿—ã€‚"
else
    echo "æ—¥å¿—å¤§å°æ­£å¸¸ã€‚"
fi
```

## æ›´å¤šç¤ºä¾‹

å¦‚æœä½ æœ‰å…¶ä»–ä½¿ç”¨åœºæ™¯æˆ–ç¤ºä¾‹ï¼Œæ¬¢è¿è´¡çŒ®åˆ°è¿™ä¸ªæ–‡æ¡£ï¼

## ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿå…¥é—¨](./LOG_QUICKSTART.md)
- [æŠ€æœ¯æ–‡æ¡£](./LOG_PERSISTENCE.md)
- [è¿ç§»æŒ‡å—](./LOG_MIGRATION.md)
