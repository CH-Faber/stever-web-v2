# 需求文档

## 简介

本文档定义了 Mindcraft 可视化管理平台的需求。Mindcraft 是一个使用 LLM（大语言模型）和 Mineflayer 控制 Minecraft AI 机器人的开源项目。该管理平台旨在提供一个用户友好的 Web 界面，用于配置、监控和管理 Mindcraft 机器人。

## 术语表

- **仪表盘 (Dashboard)**: 可视化管理平台的主界面，展示机器人状态概览
- **机器人配置 (Bot_Profile)**: 机器人配置文件，定义机器人的名称、模型和提示词
- **LLM提供商 (LLM_Provider)**: 大语言模型提供商（如 OpenAI、Google、Anthropic 等）
- **任务 (Task)**: 机器人执行的任务，包含目标、初始物品栏等配置
- **密钥管理器 (API_Key_Manager)**: API 密钥管理组件，用于安全存储和管理各 LLM 提供商的密钥
- **机器人监控 (Bot_Monitor)**: 机器人监控组件，实时显示机器人状态和日志
- **设置面板 (Settings_Panel)**: 设置面板，用于配置 Minecraft 服务器连接参数

## 需求列表

### 需求 1: 仪表盘概览

**用户故事:** 作为用户，我希望看到所有 Mindcraft 机器人的概览仪表盘，以便快速了解机器人群的状态。

#### 验收标准

1. 当用户打开仪表盘时，仪表盘应显示所有已配置的机器人配置列表
2. 当机器人正在运行时，仪表盘应显示其当前状态（在线/离线/错误）
3. 当用户点击机器人卡片时，仪表盘应导航到该机器人的详情页面
4. 仪表盘应显示活跃和非活跃机器人的总数

### 需求 2: 机器人配置管理

**用户故事:** 作为用户，我希望创建和编辑机器人配置，以便自定义我的 Minecraft AI 代理。

#### 验收标准

1. 当用户点击"创建机器人"时，机器人配置编辑器应显示包含所有可配置字段的表单
2. 机器人配置编辑器应允许设置机器人名称、模型提供商和模型名称
3. 当用户保存机器人配置时，系统应在保存前验证所有必填字段
4. 机器人配置编辑器应支持编辑现有配置
5. 当用户删除机器人配置时，系统应在删除前请求确认
6. 机器人配置编辑器应允许为聊天、代码、视觉和嵌入配置不同的模型

### 需求 3: API 密钥管理

**用户故事:** 作为用户，我希望安全地管理我的 LLM API 密钥，以便连接到不同的 AI 提供商。

#### 验收标准

1. 密钥管理器应显示支持的 LLM 提供商列表（OpenAI、Google、Anthropic、xAI、DeepSeek、Qwen、Mistral、Replicate、Groq、HuggingFace、Novita、OpenRouter、GLHF、Hyperbolic、Cerebras、Mercury）
2. 当用户输入 API 密钥时，密钥管理器应遮蔽密钥显示以确保安全
3. 密钥管理器应将 API 密钥安全存储在 keys.json 文件中
4. 当用户更新 API 密钥时，系统应在保存前验证密钥格式
5. 密钥管理器应指示哪些 API 密钥已配置，哪些缺失

### 需求 4: 服务器连接设置

**用户故事:** 作为用户，我希望配置 Minecraft 服务器连接设置，以便我的机器人可以连接到不同的服务器。

#### 验收标准

1. 设置面板应允许配置 Minecraft 服务器主机地址
2. 设置面板应允许配置服务器端口（默认：55916）
3. 设置面板应允许在本地局域网和在线服务器模式之间切换
4. 当选择在线模式时，设置面板应显示 Microsoft 身份验证选项
5. 设置面板应允许配置 Minecraft 版本

### 需求 5: 任务管理

**用户故事:** 作为用户，我希望为我的机器人创建和管理任务，以便自动化它们的活动。

#### 验收标准

1. 任务管理器应显示可用任务列表
2. 当用户创建任务时，任务管理器应允许设置目标、目标物品、目标数量和超时时间
3. 任务管理器应允许为任务配置初始物品栏
4. 当用户启动任务时，系统应使用指定的任务配置启动机器人
5. 任务管理器应显示任务执行状态和进度

### 需求 6: 实时监控

**用户故事:** 作为用户，我希望实时监控我的机器人，以便观察它们的行为并排除故障。

#### 验收标准

1. 机器人监控应显示运行中机器人的实时日志
2. 机器人监控应显示机器人在 Minecraft 世界中的当前位置
3. 机器人监控应显示机器人的物品栏内容
4. 当发生错误时，机器人监控应高亮显示错误消息
5. 机器人监控应允许按严重级别（信息、警告、错误）过滤日志

### 需求 7: 启动和停止控制

**用户故事:** 作为用户，我希望从仪表盘启动和停止机器人，以便无需使用命令行即可控制它们的运行。

#### 验收标准

1. 当用户点击"启动机器人"时，系统应启动选定的机器人配置
2. 当用户点击"停止机器人"时，系统应优雅地终止运行中的机器人
3. 如果缺少必需的 API 密钥，系统应阻止启动机器人
4. 如果机器人意外崩溃，系统应显示错误通知并更新机器人状态
5. 系统应支持同时启动多个机器人

### 需求 8: 配置导入导出

**用户故事:** 作为用户，我希望导入和导出配置，以便备份和分享我的设置。

#### 验收标准

1. 当用户点击"导出"时，系统应生成包含所有机器人配置和设置的 JSON 文件
2. 当用户导入配置文件时，系统应在应用前验证文件格式
3. 如果导入的配置无效，系统应显示描述性错误消息
4. 系统应允许选择性导入特定配置或设置
